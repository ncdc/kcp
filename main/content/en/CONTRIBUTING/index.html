<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Contributing to kcp - kcp</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../../css/version-select.css" rel="stylesheet">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">kcp</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Content <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">En</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../" class="dropdown-item"><img src="logo.png" style="vertical-align: middle;" /> kcp Documentation</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Contributing to kcp</a>
</li>
            
<li>
    <a href="../GOALS/" class="dropdown-item">Project Goals</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Concepts</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../concepts/" class="dropdown-item">Terminology for kcp</a>
</li>
            
<li>
    <a href="../concepts/authorization/" class="dropdown-item">Authorization</a>
</li>
            
<li>
    <a href="../concepts/cache-server/" class="dropdown-item">Cache Server</a>
</li>
            
<li>
    <a href="../concepts/cluster-mapper/" class="dropdown-item">Cluster Mapper</a>
</li>
            
<li>
    <a href="../concepts/kubectl-kcp-plugin/" class="dropdown-item">Kubectl kcp plugin</a>
</li>
            
<li>
    <a href="../concepts/locations-and-scheduling/" class="dropdown-item">Placement, Locations and Scheduling</a>
</li>
            
<li>
    <a href="../concepts/quickstart-tenancy-and-apis/" class="dropdown-item">Quickstart: Tenancy and APIs</a>
</li>
            
<li>
    <a href="../concepts/storage/" class="dropdown-item">Storage and stateful applications</a>
</li>
            
<li>
    <a href="../concepts/syncer/" class="dropdown-item">Registering Kubernetes Clusters using syncer</a>
</li>
            
<li>
    <a href="../concepts/virtual-workspaces/" class="dropdown-item">Virtual Workspaces</a>
</li>
            
<li>
    <a href="../concepts/workspaces/" class="dropdown-item">Workspaces</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Developers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../concepts/developers/" class="dropdown-item">Developers</a>
</li>
            
<li>
    <a href="../concepts/developers/controllers/" class="dropdown-item">Writing kcp-aware controllers</a>
</li>
            
<li>
    <a href="../concepts/developers/library-usage/" class="dropdown-item">Using kcp as a library</a>
</li>
            
<li>
    <a href="../concepts/developers/releasing/" class="dropdown-item">Publishing a new kcp release</a>
</li>
            
<li>
    <a href="../concepts/developers/replicate-new-resource/" class="dropdown-item">Adding a new resource to the cache server and replication controller</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Investigations</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../concepts/investigations/logical-clusters/" class="dropdown-item">Logical clusters</a>
</li>
            
<li>
    <a href="../concepts/investigations/minimal-api-server/" class="dropdown-item">Minimal API Server</a>
</li>
            
<li>
    <a href="../concepts/investigations/self-service-policy/" class="dropdown-item">Self-service policy</a>
</li>
            
<li>
    <a href="../concepts/investigations/transparent-multi-cluster/" class="dropdown-item">Transparent multi-cluster</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Reference</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cli</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../reference/cli/kcp/" class="dropdown-item">kcp</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_bind/" class="dropdown-item">kcp bind</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_bind_apiexport/" class="dropdown-item">kcp bind apiexport</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_bind_compute/" class="dropdown-item">kcp bind compute</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_claims/" class="dropdown-item">kcp claims</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_claims_get/" class="dropdown-item">kcp claims get</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_claims_get_apibinding/" class="dropdown-item">kcp claims get apibinding</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_crd/" class="dropdown-item">kcp crd</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_crd_snapshot/" class="dropdown-item">kcp crd snapshot</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workload/" class="dropdown-item">kcp workload</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workload_cordon/" class="dropdown-item">kcp workload cordon</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workload_drain/" class="dropdown-item">kcp workload drain</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workload_sync/" class="dropdown-item">kcp workload sync</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workload_uncordon/" class="dropdown-item">kcp workload uncordon</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workspace/" class="dropdown-item">kcp workspace</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workspace_create-context/" class="dropdown-item">kcp workspace create-context</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workspace_create/" class="dropdown-item">kcp workspace create</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workspace_current/" class="dropdown-item">kcp workspace current</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workspace_tree/" class="dropdown-item">kcp workspace tree</a>
</li>
            
<li>
    <a href="../reference/cli/kcp_workspace_use/" class="dropdown-item">kcp workspace use</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Crd</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../reference/crd/apibindings.apis.kcp.io/" class="dropdown-item">APIBinding</a>
</li>
            
<li>
    <a href="../reference/crd/apiexportendpointslices.apis.kcp.io/" class="dropdown-item">APIExportEndpointSlice</a>
</li>
            
<li>
    <a href="../reference/crd/apiexports.apis.kcp.io/" class="dropdown-item">APIExport</a>
</li>
            
<li>
    <a href="../reference/crd/apiresourceimports.apiresource.kcp.io/" class="dropdown-item">APIResourceImport</a>
</li>
            
<li>
    <a href="../reference/crd/apiresourceschemas.apis.kcp.io/" class="dropdown-item">APIResourceSchema</a>
</li>
            
<li>
    <a href="../reference/crd/locations.scheduling.kcp.io/" class="dropdown-item">Location</a>
</li>
            
<li>
    <a href="../reference/crd/logicalclusters.core.kcp.io/" class="dropdown-item">LogicalCluster</a>
</li>
            
<li>
    <a href="../reference/crd/negotiatedapiresources.apiresource.kcp.io/" class="dropdown-item">NegotiatedAPIResource</a>
</li>
            
<li>
    <a href="../reference/crd/partitions.topology.kcp.io/" class="dropdown-item">Partition</a>
</li>
            
<li>
    <a href="../reference/crd/partitionsets.topology.kcp.io/" class="dropdown-item">PartitionSet</a>
</li>
            
<li>
    <a href="../reference/crd/placements.scheduling.kcp.io/" class="dropdown-item">Placement</a>
</li>
            
<li>
    <a href="../reference/crd/shards.core.kcp.io/" class="dropdown-item">Shard</a>
</li>
            
<li>
    <a href="../reference/crd/synctargets.workload.kcp.io/" class="dropdown-item">SyncTarget</a>
</li>
            
<li>
    <a href="../reference/crd/workspaces.tenancy.kcp.io/" class="dropdown-item">Workspace</a>
</li>
            
<li>
    <a href="../reference/crd/workspacetypes.tenancy.kcp.io/" class="dropdown-item">WorkspaceType</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Enhancements <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../enhancements/0001_project_enhancements/" class="dropdown-item">0001: Project process refinement for 2023</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../GOALS/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#contributing-to-kcp" class="nav-link">Contributing to kcp</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#certificate-of-origin" class="nav-link">Certificate of Origin</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#getting-started" class="nav-link">Getting started</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#finding-areas-to-contribute" class="nav-link">Finding areas to contribute</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#priorities-milestones" class="nav-link">Priorities &amp; milestones</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#epics" class="nav-link">Epics</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tracking-work" class="nav-link">Tracking work</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#coding-guidelines-conventions" class="nav-link">Coding guidelines &amp; conventions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#continuous-integration" class="nav-link">Continuous Integration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#debugging-flakes" class="nav-link">Debugging flakes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#community-roles" class="nav-link">Community Roles</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="contributing-to-kcp">Contributing to kcp</h1>
<p>kcp is <a href="LICENSE">Apache 2.0 licensed</a> and we accept contributions via
GitHub pull requests.</p>
<p>Please read the following guide if you're interested in contributing to kcp.</p>
<h2 id="certificate-of-origin">Certificate of Origin</h2>
<p>By contributing to this project you agree to the Developer Certificate of
Origin (DCO). This document was created by the Linux Kernel community and is a
simple statement that you, as a contributor, have the legal right to make the
contribution. See the <a href="DCO">DCO</a> file for details.</p>
<h2 id="getting-started">Getting started</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ol>
<li>Clone this repository.</li>
<li><a href="https://golang.org/doc/install">Install Go</a> (1.19+).</li>
<li>Install <a href="https://kubernetes.io/docs/tasks/tools/#kubectl">kubectl</a>.</li>
</ol>
<h3 id="build-verify">Build &amp; verify</h3>
<ol>
<li>In one terminal, build and start <code>kcp</code>:</li>
</ol>
<pre><code>go run ./cmd/kcp start
</code></pre>
<ol>
<li>In another terminal, tell <code>kubectl</code> where to find the kubeconfig:</li>
</ol>
<pre><code>export KUBECONFIG=.kcp/admin.kubeconfig
</code></pre>
<ol>
<li>Confirm you can connect to <code>kcp</code>:</li>
</ol>
<pre><code>kubectl api-resources
</code></pre>
<h2 id="finding-areas-to-contribute">Finding areas to contribute</h2>
<p>Starting to participate in a new project can sometimes be overwhelming, and you may not know where to begin. Fortunately, we are here to help! We track all of our tasks here in GitHub, and we label our issues to categorize them. Here are a couple of handy links to check out:</p>
<ul>
<li><a href="https://github.com/kcp-dev/kcp/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22">Good first issue</a> issues</li>
<li><a href="https://github.com/kcp-dev/kcp/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22">Help wanted</a> issues</li>
</ul>
<p>You're certainly not limited to only these kinds of issues, though! If you're comfortable, please feel free to try working on anything that is open.</p>
<p>We do use the assignee feature in GitHub for issues. If you find an unassigned issue, comment asking if you can be assigned, and ideally wait for a maintainer to respond. If you find an assigned issue and you want to work on it or help out, please reach out to the assignee first.</p>
<p>Sometimes you might get an amazing idea and start working on a huge amount of code. We love and encourage excitement like this, but we do ask that before you embarking on a giant pull request, please reach out to the community first for an initial discussion. You could <a href="https://github.com/kcp-dev/kcp/issues/new/choose">file an issue</a>, send a discussion to our <a href="https://groups.google.com/g/kcp-dev">mailing list</a>, and/or join one of our <a href="https://github.com/kcp-dev/kcp/issues?q=is%3Aissue+is%3Aopen+label%3Acommunity-meeting">community meetings</a>.</p>
<p>Finally, we welcome and value all types of contributions, beyond "just code"! Other types include triaging bugs, tracking down and fixing flaky tests, improving our documentation, helping answer community questions, proposing and reviewing designs, etc.</p>
<h2 id="priorities-milestones">Priorities &amp; milestones</h2>
<p>We prioritize issues and features both synchronously (during community meetings) and asynchronously (Slack/GitHub conversations).</p>
<p>We group issues together into milestones. Each milestone represents a set of new features and bug fixes that we want users to try out. We aim for each milestone to take about a month from start to finish.</p>
<p>You can see the <a href="https://github.com/kcp-dev/kcp/milestones?direction=asc&amp;sort=due_date&amp;state=open">current list of milestones</a> in GitHub.</p>
<p>For a given issue or pull request, its milestone may be:</p>
<ul>
<li><strong>unset/unassigned</strong>: we haven't looked at this yet, or if we have, we aren't sure if we want to do it and it needs more community discussion</li>
<li><strong>assigned to a named milestone</strong></li>
<li><strong>assigned to <code>TBD</code></strong> - we have looked at this, decided that it is important and we eventually would like to do it, but we aren't sure exactly when</li>
</ul>
<p>If you are confident about the target milestone for your issue or PR, please set it. If you don’t have permissions, please ask &amp; we’ll set it for you.</p>
<h2 id="epics">Epics</h2>
<p>We use the <a href="https://github.com/kcp-dev/kcp/issues?q=is%3Aopen+is%3Aissue+label%3Aepic+">epic label</a> to track large features that typically involve multiple stories. When creating a new epic, please use the <a href="https://github.com/kcp-dev/kcp/issues/new?assignees=&amp;labels=epic&amp;template=epic.md&amp;title=">epic issue template</a>.</p>
<p>Please make sure that you fill in all the sections of the template (it's ok if some of this is done later, after creating the issue). If you need help with anything, please let us know.</p>
<h3 id="story-tasks">Story tasks</h3>
<p>Story tasks in an epic should generally represent an independent chunk of work that can be implemented. These don't necessarily need to be copied to standalone GitHub issues; it's ok if we just track the story in the epic as a task. On a case by case basis, if a story seems large enough that it warrants its own issue, we can discuss creating one.</p>
<p>Please tag yourself using your GitHub handle next to a story task you plan to work on. If you don't have permission to do this, please let us know by either commenting on the issue, or reaching out in Slack, and we'll assist you.</p>
<p>When you open a PR for a story task, please edit the epic description and add a link to the PR next to your task.</p>
<p>When the PR has been merged, please make sure the task is checked off in the epic.</p>
<h2 id="tracking-work">Tracking work</h2>
<h3 id="issue-status-and-project-board">Issue status and project board</h3>
<p>We use the Github projects beta for project management, compare <a href="https://github.com/orgs/kcp-dev/projects/1">our project board</a>. Please add issues and PRs into the kcp project and update the status (new, in-progress, ...) for those you are actively working on.</p>
<h3 id="unplanneduntracked-work">Unplanned/untracked work</h3>
<p>If you find yourself working on something that is unplanned and/or untracked (i.e., not an open GitHub issue or story task in an epic), that's 100% ok, but we'd like to track this type of work too! Please file a new issue for it, and when you have a PR ready, mark the PR as fixing the issue.</p>
<h2 id="coding-guidelines-conventions">Coding guidelines &amp; conventions</h2>
<ul>
<li>Always be clear about what clients or client configs target. Never use an unqualified <code>client</code>. Instead, always qualify. For example:<ul>
<li><code>rootClient</code></li>
<li><code>orgClient</code></li>
<li><code>pclusterClient</code></li>
<li><code>rootKcpClient</code></li>
<li><code>orgKubeClient</code></li>
</ul>
</li>
<li>Configs intended for <code>NewForConfig</code> (i.e. today often called "admin workspace config") should uniformly be called <code>clusterConfig</code><ul>
<li>Note: with org workspaces, <code>kcp</code> will no longer default clients to the "root" ("admin") logical cluster</li>
<li>Note 2: sometimes we use clients for same purpose, but this can be harder to read</li>
</ul>
</li>
<li>Cluster-aware clients should follow similar naming conventions:<ul>
<li><code>crdClusterClient</code></li>
<li><code>kcpClusterClient</code></li>
<li><code>kubeClusterClient</code></li>
</ul>
</li>
<li><code>clusterName</code> is a kcp term. It is <strong>NOT</strong> a name of a physical cluster. If we mean the latter, use <code>pclusterName</code> or similar.</li>
<li>In the syncer: upstream = kcp, downstream = pcluster. Depending on direction, "from" and "to" can have different meanings. <code>source</code> and <code>sink</code> are synonyms for upstream and downstream.</li>
<li>Qualify "namespace"s in code that handle up- and downstream, e.g. <code>upstreamNamespace</code>, <code>downstreamNamespace</code>, and also <code>upstreamObj</code>, <code>downstreamObj</code>.</li>
<li>Logging:</li>
<li>Use the <code>fmt.Sprintf("%s|%s/%s", clusterName, namespace, name</code> syntax.</li>
<li>Default log-level is 2.</li>
<li>Controllers should generally log (a) <strong>one</strong> line (not more) non-error progress per item with <code>klog.V(2)</code> (b) actions like create/update/delete via <code>klog.V(3)</code> and (c) skipped actions, i.e. what was not done for reasons via <code>klog.V(4)</code>.</li>
<li>When orgs land: <code>clusterName</code> or <code>fooClusterName</code> is always the fully qualified value that you can stick into obj.ObjectMeta.ClusterName. It's not necessarily the <code>(Cluster)Workspace.Name</code> from the object. For the latter, use <code>workspaceName</code> or <code>orgName</code>.</li>
<li>Generally do <code>klog.Errorf</code> or <code>return err</code>, but not both together. If you need to make it clear where an error came from, you can wrap it.</li>
<li>New features start under a feature-gate (<code>--feature-gate GateName=true</code>). (At some point in the future), new feature-gates are off by default <em>at least</em> until the APIs are promoted to beta (we are not there before we have reached MVP).</li>
<li>Feature-gated code can be incomplete. Also their e2e coverage can be incomplete. <strong>We do not compromise on unit tests</strong>. Every feature-gated code needs full unit tests as every other code-path.</li>
<li>Go Proverbs are good guidelines for style: https://go-proverbs.github.io/ – watch https://www.youtube.com/watch?v=PAAkCSZUG1c.</li>
<li>We use <a href="github.com/stretchr/testify/require">https://github.com/stretchr/testify/tree/master/require</a> a lot in tests, and avoid
  <a href="https://github.com/stretchr/testify/assert">https://github.com/stretchr/testify/tree/master/assert</a>.</li>
</ul>
<p>Note this subtle distinction of nested <code>require</code> statements:
  <code>Golang
  require.Eventually(t, func() bool {
    foos, err := client.List(...)
    require.NoError(err) // fail fast, including failing require.Eventually immediately
    return someCondition(foos)
  }, ...)</code>
  and
  <code>Golang
  require.Eventually(t, func() bool {
    foos, err := client.List(...)
    if err != nil {
       return false // keep trying
    }
    return someCondition(foos)
  }, ...)</code>
  The first fails fast on every client error. The second ignores client errors and keeps trying. Either
  has its place, depending on whether the client error is to be expected (e.g. because of asynchronicity making the resource available),
  or signals a real test problem.</p>
<h3 id="using-kubebuilder-crd-validation-annotations">Using Kubebuilder CRD Validation Annotations</h3>
<p>All of the built-in types for <code>kcp</code> are <code>CustomResourceDefinitions</code>, and we generate YAML spec for them from our Go types using <a href="https://github.com/kubernetes-sigs/kubebuilder">kubebuilder</a>.</p>
<p>When adding a field that requires validation, custom annotations are used to translate this logic into the generated OpenAPI spec. <a href="https://book.kubebuilder.io/reference/markers/crd-validation.html">This doc</a> gives an overview of possible validations. These annotations map directly to concepts in the <a href="https://swagger.io/specification/#data-type-format">OpenAPI Spec</a> so, for instance, the <code>format</code> of strings is defined there, not in kubebuilder. Furthermore, Kubernetes has forked the OpenAPI project <a href="https://github.com/kubernetes/kube-openapi/tree/master/pkg/validation">here</a> and extends more formats in the extensions-apiserver <a href="https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1/types_jsonschema.go#L27">here</a>.</p>
<h3 id="getting-your-pr-merged">Getting your PR Merged</h3>
<p>The <code>kcp</code> project uses <code>OWNERS</code> files to denote the collaborators who can assist you in getting your PR merged.  There
are two roles: reviewer and approver.  Merging a PR requires sign off from both a reviewer and an approver.</p>
<h2 id="continuous-integration">Continuous Integration</h2>
<p>kcp uses a combination of <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions">GitHub Actions</a> and
and <a href="https://github.com/kubernetes/test-infra/tree/master/prow">prow</a> to automate the build process.</p>
<p>Here are the most important links:</p>
<ul>
<li><a href="https://github.com/kcp-dev/kcp/blob/main/.github/workflows/ci.yaml">.github/workflows/ci.yaml</a> defines the Github Actions based jobs.</li>
<li><a href="https://github.com/openshift/release/tree/master/ci-operator/config/kcp-dev/kcp">openshift/release/ci-operator/config/kcp-dev/kcp</a> defines the prow based jobs.</li>
<li><a href="https://docs.ci.openshift.org/docs/">OpenShift CI docs</a> describes the OpenShift CI system that kcp is currently piggy backing on.</li>
<li><a href="https://k8s-testgrid.appspot.com/kcp-main#Summary">Testgrid</a> shows CI statistics.</li>
</ul>
<h2 id="debugging-flakes">Debugging flakes</h2>
<p>Tests that sometimes pass and sometimes fail are known as flakes. Sometimes, there is only an issue with the test, while
other times, there is an actual bug in the main code. Regardless of the root cause, it's important to try to eliminate
as many flakes as possible.</p>
<h3 id="unit-test-flakes">Unit test flakes</h3>
<p>If you're trying to debug a unit test flake, you can try to do something like this:</p>
<pre><code class="language-shell">go test -race ./pkg/reconciler/apis/apibinding -run TestReconcileBinding -count 100 -failfast
</code></pre>
<p>This tests one specific package, running only a single test case by name, 100 times in a row. It fails as soon as it
encounters any failure. If this passes, it may still be possible there is a flake somewhere, so you may need to run
it a few times to be certain. If it fails, that's a great sign - you've been able to reproduce it locally. Now you
need to dig into the test condition that is failing. Work backwards from the condition and try to determine if the
condition is correct, and if it should be that way all the time. Look at the code under test and see if there are any
reasons things might not be deterministic.</p>
<h3 id="end-to-end-test-flakes">End to end test flakes</h3>
<p>Debugging an end-to-end (e2e) test that is flaky can be a bit trickier than a unit test. Our e2e tests run in one of
two modes:</p>
<ol>
<li>Tests share a single kcp server</li>
<li>Tests in a package share a single kcp server</li>
</ol>
<p>The <code>e2e-shared-server</code> CI job uses mode 1, and the <code>e2e</code> CI job uses mode 2.</p>
<p>There are also a handful of tests that require a fully isolated kcp server, because they manipulate some configuration
aspects that are system-wide and would break all the other tests. These tests run in both <code>e2e</code> and <code>e2e-shared-server</code>,
separate from the other kcp instance(s).</p>
<p>You can use the same <code>run</code>, <code>-count</code>, and <code>-failfast</code> settings from the unit test section above for trying to reproduce
e2e flakes locally. Additionally, if you would like to operate in mode 1 (all tests share a single kcp server), you can
start a kcp instance locally in a separate terminal or tab:</p>
<pre><code class="language-shell">bin/test-server
</code></pre>
<p>Then, to have your test use that shared kcp server, you add <code>-args --use-default-kcp-server</code> to your <code>go test</code> run:</p>
<pre><code class="language-shell">go test ./test/e2e/apibinding -count 20 -failfast -args --use-default-kcp-server
</code></pre>
<h2 id="community-roles">Community Roles</h2>
<h3 id="reviewers">Reviewers</h3>
<p>Reviewers are responsible for reviewing code for correctness and adherence to standards. Oftentimes reviewers will
be able to advise on code efficiency and style as it relates to golang or project conventions as well as other considerations
that might not be obvious to the contributor.</p>
<h3 id="approvers">Approvers</h3>
<p>Approvers are responsible for sign-off on the acceptance of the contribution. In essence, approval indicates that the
change is desired and good for the project, aligns with code, api, and system conventions, and appears to follow all required
process including adequate testing, documentation, follow ups, or notifications to other areas who might be interested
or affected by the change.</p>
<p>Approvers are also reviewers.</p>
<h3 id="management-of-owners-files">Management of <code>OWNERS</code> files</h3>
<p>If a reviewer or approver no longer wishes to be in their current role it is requested that a PR
be opened to update the <code>OWNERS</code> file. <code>OWNERS</code> files may be periodically reviewed and updated based on project activity
or feedback to ensure an acceptable contributor experience is maintained.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>
        <script src="../../../js/version-select.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
